{"ast":null,"code":"import axios from \"axios\";\nconst baseUrl = \"http://0.0.0.0:5050\";\nexport const doLogin = () => {\n  return async (dispatch, getState) => {\n    await dispatch({\n      type: \"LOADING\"\n    }); // console.log(\"cek storage\", localStorage)\n\n    const username = getState().user.username;\n    const password = getState().user.password;\n    localStorage.clear();\n    localStorage.setItem(\"username\", username); // console.log(\"cek storage2\", localStorage)\n\n    await axios.get(baseUrl + \"/auth\", {\n      params: {\n        username: username,\n        password: password\n      }\n    }).then(async response => {\n      console.log(\"masuk api\", response.data.token);\n      await dispatch({\n        type: \"SUCCESS_LOGIN\",\n        payload: response.data\n      });\n      localStorage.setItem(\"token\", response.data.token); // console.log(\"cek storage2\", localStorage)\n    });\n    const token = localStorage.getItem(\"token\");\n    await axios.get(baseUrl + \"/user\", {\n      headers: {\n        Authorization: 'Bearer ' + token\n      }\n    });\n    dispatch({\n      type: \"GET_USER\",\n      payload: response.data\n    }).catch(function (error) {});\n  };\n};\nexport const changeInputUser = el => {\n  return {\n    type: \"CHANGE_INPUT_USER\",\n    payload: el\n  };\n};\nexport const doLogout = () => {\n  localStorage.clear();\n  console.log(\"cek storage2\", localStorage);\n  return {\n    type: \"LOG_OUT\"\n  };\n};","map":{"version":3,"sources":["/home/alta18/Documents/TUGAS_TOPED/FRONT_END/src/store/action/signInAction.js"],"names":["axios","baseUrl","doLogin","dispatch","getState","type","username","user","password","localStorage","clear","setItem","get","params","then","response","console","log","data","token","payload","getItem","headers","Authorization","catch","error","changeInputUser","el","doLogout"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,MAAMC,OAAO,GAAG,qBAAhB;AAEA,OAAO,MAAMC,OAAO,GAAG,MAAM;AACzB,SAAO,OAAOC,QAAP,EAAiBC,QAAjB,KAA8B;AACjC,UAAMD,QAAQ,CAAC;AACXE,MAAAA,IAAI,EAAE;AADK,KAAD,CAAd,CADiC,CAIjC;;AACA,UAAMC,QAAQ,GAAGF,QAAQ,GAAGG,IAAX,CAAgBD,QAAjC;AACA,UAAME,QAAQ,GAAGJ,QAAQ,GAAGG,IAAX,CAAgBC,QAAjC;AACAC,IAAAA,YAAY,CAACC,KAAb;AACAD,IAAAA,YAAY,CAACE,OAAb,CAAqB,UAArB,EAAiCL,QAAjC,EARiC,CASjC;;AACA,UAAMN,KAAK,CACNY,GADC,CACGX,OAAO,GAAG,OADb,EACsB;AACpBY,MAAAA,MAAM,EAAE;AACJP,QAAAA,QAAQ,EAAEA,QADN;AAEJE,QAAAA,QAAQ,EAAEA;AAFN;AADY,KADtB,EAODM,IAPC,CAOI,MAAOC,QAAP,IAAoB;AACtBC,MAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ,EAAyBF,QAAQ,CAACG,IAAT,CAAcC,KAAvC;AACA,YAAMhB,QAAQ,CAAC;AAAEE,QAAAA,IAAI,EAAE,eAAR;AAAyBe,QAAAA,OAAO,EAAEL,QAAQ,CAACG;AAA3C,OAAD,CAAd;AACAT,MAAAA,YAAY,CAACE,OAAb,CAAqB,OAArB,EAA8BI,QAAQ,CAACG,IAAT,CAAcC,KAA5C,EAHsB,CAItB;AACH,KAZC,CAAN;AAaA,UAAMA,KAAK,GAAGV,YAAY,CAACY,OAAb,CAAqB,OAArB,CAAd;AACA,UAAMrB,KAAK,CACNY,GADC,CACGX,OAAO,GAAG,OADb,EACsB;AACpBqB,MAAAA,OAAO,EAAE;AACLC,QAAAA,aAAa,EAAE,YAAYJ;AADtB;AADW,KADtB,CAAN;AAMAhB,IAAAA,QAAQ,CAAC;AACLE,MAAAA,IAAI,EAAE,UADD;AAELe,MAAAA,OAAO,EAAEL,QAAQ,CAACG;AAFb,KAAD,CAAR,CAIKM,KAJL,CAIW,UAAUC,KAAV,EAAiB,CACvB,CALL;AAMH,GApCD;AAqCH,CAtCM;AAwCP,OAAO,MAAMC,eAAe,GAAIC,EAAD,IAAQ;AACnC,SAAO;AACHtB,IAAAA,IAAI,EAAE,mBADH;AAEHe,IAAAA,OAAO,EAAEO;AAFN,GAAP;AAIH,CALM;AAMP,OAAO,MAAMC,QAAQ,GAAG,MAAM;AAC1BnB,EAAAA,YAAY,CAACC,KAAb;AACAM,EAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ,EAA4BR,YAA5B;AACA,SAAO;AACHJ,IAAAA,IAAI,EAAE;AADH,GAAP;AAGH,CANM","sourcesContent":["import axios from \"axios\"\nconst baseUrl = \"http://0.0.0.0:5050\"\n\nexport const doLogin = () => {\n    return async (dispatch, getState) => {\n        await dispatch({\n            type: \"LOADING\"\n        });\n        // console.log(\"cek storage\", localStorage)\n        const username = getState().user.username;\n        const password = getState().user.password;\n        localStorage.clear()\n        localStorage.setItem(\"username\", username)\n        // console.log(\"cek storage2\", localStorage)\n        await axios\n            .get(baseUrl + \"/auth\", {\n                params: {\n                    username: username,\n                    password: password\n                }\n            })\n            .then(async (response) => {\n                console.log(\"masuk api\", response.data.token)\n                await dispatch({ type: \"SUCCESS_LOGIN\", payload: response.data });\n                localStorage.setItem(\"token\", response.data.token)\n                // console.log(\"cek storage2\", localStorage)\n            })\n        const token = localStorage.getItem(\"token\")\n        await axios\n            .get(baseUrl + \"/user\", {\n                headers: {\n                    Authorization: 'Bearer ' + token\n                }\n            })\n        dispatch({\n            type: \"GET_USER\",\n            payload: response.data\n        })\n            .catch(function (error) {\n            });\n    };\n};\n\nexport const changeInputUser = (el) => {\n    return {\n        type: \"CHANGE_INPUT_USER\",\n        payload: el,\n    };\n};\nexport const doLogout = () => {\n    localStorage.clear()\n    console.log(\"cek storage2\", localStorage)\n    return {\n        type: \"LOG_OUT\",\n    };\n};"]},"metadata":{},"sourceType":"module"}