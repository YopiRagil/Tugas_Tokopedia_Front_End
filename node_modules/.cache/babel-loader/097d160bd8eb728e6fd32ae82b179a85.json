{"ast":null,"code":"import axios from \"axios\";\nconst baseUrl = \"http://0.0.0.0:5050\";\nexport const doLogin = () => {\n  return async (dispatch, getState) => {\n    await dispatch({\n      type: \"LOADING\"\n    });\n    const username = getState().user.username;\n    const password = getState().user.password;\n    localStorage.clear();\n    localStorage.setItem(\"username\", username);\n    alert(\"cek action\");\n    await axios.get(baseUrl + \"/auth\", {\n      params: {\n        username: username,\n        password: password\n      }\n    }).then(async response => {\n      console.log(\"masuk api\", response.data.token);\n      await dispatch({\n        type: \"SUCCESS_LOGIN\",\n        payload: response.data\n      });\n      localStorage.setItem(\"token\", response.data.token); // console.log(\"cek storage2\", localStorage)\n    }).catch(function (error) {});\n    const token = localStorage.getItem(\"token\");\n    console.log(\"cek response1\", token);\n    const response = await axios.get(baseUrl + \"/user\", {\n      headers: {\n        Authorization: 'Bearer ' + \"token\"\n      }\n    });\n    await dispatch({\n      type: \"GET_USER\",\n      payload: response.data\n    });\n  };\n}; // export const registrasiUser = () => {\n//     return async (dispatch, getState) => {\n//         alert(\"sdh msuk tws regis1\")\n//         const username = getState().register.username;\n//         const password = getState().register.password;\n//         const name = getState().register.name;\n//         const email = getState().register.email;\n//         const noTlp = getState().register.nomorTelephone;\n//         const alamat = getState().register.alamat;\n//         const avatar = getState().register.avatar;\n//         const bodyRequestUser = {\n//             username: username,\n//             password: password,\n//             name: name,\n//             email: email,\n//             no_hp: noTlp,\n//             alamat: alamat,\n//             avatar: avatar,\n//         }\n//         localStorage.clear()\n//         localStorage.setItem(\"username\", username)\n//         await axios\n//             .post(baseUrl + \"/user\", bodyRequestUser, {\n//                 headers: {\n//                     \"Content-Type\": \"application/json; charset=utf-8\",\n//                 },\n//             })\n//         alert(\"Create account success\")\n//     };\n// };\n\nexport const changeInputUser = el => {\n  return {\n    type: \"CHANGE_INPUT_USER\",\n    payload: el\n  };\n};\nexport const doLogout = () => {\n  localStorage.clear();\n  console.log(\"cek storage2\", localStorage);\n  return {\n    type: \"LOG_OUT\"\n  };\n};","map":{"version":3,"sources":["/home/alta18/Documents/TUGAS_TOPED/FRONT_END/src/store/action/signInAction.js"],"names":["axios","baseUrl","doLogin","dispatch","getState","type","username","user","password","localStorage","clear","setItem","alert","get","params","then","response","console","log","data","token","payload","catch","error","getItem","headers","Authorization","changeInputUser","el","doLogout"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,MAAMC,OAAO,GAAG,qBAAhB;AAEA,OAAO,MAAMC,OAAO,GAAG,MAAM;AACzB,SAAO,OAAOC,QAAP,EAAiBC,QAAjB,KAA8B;AACjC,UAAMD,QAAQ,CAAC;AACXE,MAAAA,IAAI,EAAE;AADK,KAAD,CAAd;AAGA,UAAMC,QAAQ,GAAGF,QAAQ,GAAGG,IAAX,CAAgBD,QAAjC;AACA,UAAME,QAAQ,GAAGJ,QAAQ,GAAGG,IAAX,CAAgBC,QAAjC;AACAC,IAAAA,YAAY,CAACC,KAAb;AACAD,IAAAA,YAAY,CAACE,OAAb,CAAqB,UAArB,EAAiCL,QAAjC;AACAM,IAAAA,KAAK,CAAC,YAAD,CAAL;AACA,UAAMZ,KAAK,CACNa,GADC,CACGZ,OAAO,GAAG,OADb,EACsB;AACpBa,MAAAA,MAAM,EAAE;AACJR,QAAAA,QAAQ,EAAEA,QADN;AAEJE,QAAAA,QAAQ,EAAEA;AAFN;AADY,KADtB,EAODO,IAPC,CAOI,MAAOC,QAAP,IAAoB;AACtBC,MAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ,EAAyBF,QAAQ,CAACG,IAAT,CAAcC,KAAvC;AACA,YAAMjB,QAAQ,CAAC;AAAEE,QAAAA,IAAI,EAAE,eAAR;AAAyBgB,QAAAA,OAAO,EAAEL,QAAQ,CAACG;AAA3C,OAAD,CAAd;AACAV,MAAAA,YAAY,CAACE,OAAb,CAAqB,OAArB,EAA8BK,QAAQ,CAACG,IAAT,CAAcC,KAA5C,EAHsB,CAItB;AACH,KAZC,EAaDE,KAbC,CAaK,UAAUC,KAAV,EAAiB,CACvB,CAdC,CAAN;AAeA,UAAMH,KAAK,GAAGX,YAAY,CAACe,OAAb,CAAqB,OAArB,CAAd;AACAP,IAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ,EAA6BE,KAA7B;AACA,UAAMJ,QAAQ,GAAG,MAAMhB,KAAK,CACvBa,GADkB,CACdZ,OAAO,GAAG,OADI,EACK;AACpBwB,MAAAA,OAAO,EAAE;AACLC,QAAAA,aAAa,EAAE,YAAY;AADtB;AADW,KADL,CAAvB;AAMA,UACIvB,QAAQ,CAAC;AACLE,MAAAA,IAAI,EAAE,UADD;AAELgB,MAAAA,OAAO,EAAEL,QAAQ,CAACG;AAFb,KAAD,CADZ;AAKH,GArCD;AAsCH,CAvCM,C,CAyCP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;;AAIA,OAAO,MAAMQ,eAAe,GAAIC,EAAD,IAAQ;AACnC,SAAO;AACHvB,IAAAA,IAAI,EAAE,mBADH;AAEHgB,IAAAA,OAAO,EAAEO;AAFN,GAAP;AAIH,CALM;AAMP,OAAO,MAAMC,QAAQ,GAAG,MAAM;AAC1BpB,EAAAA,YAAY,CAACC,KAAb;AACAO,EAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ,EAA4BT,YAA5B;AACA,SAAO;AACHJ,IAAAA,IAAI,EAAE;AADH,GAAP;AAGH,CANM","sourcesContent":["import axios from \"axios\"\nconst baseUrl = \"http://0.0.0.0:5050\"\n\nexport const doLogin = () => {\n    return async (dispatch, getState) => {\n        await dispatch({\n            type: \"LOADING\"\n        });\n        const username = getState().user.username;\n        const password = getState().user.password;\n        localStorage.clear()\n        localStorage.setItem(\"username\", username)\n        alert(\"cek action\")\n        await axios\n            .get(baseUrl + \"/auth\", {\n                params: {\n                    username: username,\n                    password: password\n                }\n            })\n            .then(async (response) => {\n                console.log(\"masuk api\", response.data.token)\n                await dispatch({ type: \"SUCCESS_LOGIN\", payload: response.data });\n                localStorage.setItem(\"token\", response.data.token)\n                // console.log(\"cek storage2\", localStorage)\n            })\n            .catch(function (error) {\n            });\n        const token = localStorage.getItem(\"token\")\n        console.log(\"cek response1\", token)\n        const response = await axios\n            .get(baseUrl + \"/user\", {\n                headers: {\n                    Authorization: 'Bearer ' + \"token\"\n                }\n            })\n        await\n            dispatch({\n                type: \"GET_USER\",\n                payload: response.data\n            })\n    };\n};\n\n// export const registrasiUser = () => {\n//     return async (dispatch, getState) => {\n//         alert(\"sdh msuk tws regis1\")\n//         const username = getState().register.username;\n//         const password = getState().register.password;\n//         const name = getState().register.name;\n//         const email = getState().register.email;\n//         const noTlp = getState().register.nomorTelephone;\n//         const alamat = getState().register.alamat;\n//         const avatar = getState().register.avatar;\n//         const bodyRequestUser = {\n//             username: username,\n//             password: password,\n//             name: name,\n//             email: email,\n//             no_hp: noTlp,\n//             alamat: alamat,\n//             avatar: avatar,\n//         }\n//         localStorage.clear()\n//         localStorage.setItem(\"username\", username)\n//         await axios\n//             .post(baseUrl + \"/user\", bodyRequestUser, {\n//                 headers: {\n//                     \"Content-Type\": \"application/json; charset=utf-8\",\n//                 },\n//             })\n//         alert(\"Create account success\")\n\n//     };\n// };\n\n\n\nexport const changeInputUser = (el) => {\n    return {\n        type: \"CHANGE_INPUT_USER\",\n        payload: el,\n    };\n};\nexport const doLogout = () => {\n    localStorage.clear()\n    console.log(\"cek storage2\", localStorage)\n    return {\n        type: \"LOG_OUT\",\n    };\n};"]},"metadata":{},"sourceType":"module"}